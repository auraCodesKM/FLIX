{% extends 'base_home.html' %}
{% block head %}
<title>Search Results - IMDb Clone</title>
{% endblock %}

{% block body %}
<header>
    <div class="logo">IMDb</div>
    <div class="nav-toggle">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <form action="{{ url_for('search') }}" method="get" class="search-form">
        {{ search_form.hidden_tag() }}
        {{ search_form.search_query(class="search-input", placeholder="Search movies, shows, actors...", value=query) }}
    </form>
    <nav>
        <a href="{{ url_for('home') }}">Movies</a>
        <a href="{{ url_for('my_ratings') }}">My Ratings</a>
        <a href="{{ url_for('logout') }}">Logout</a>
    </nav>
</header>

<main>
    <section class="search-results">
        <h2>Search Results for "{{ query }}"</h2>
        {% if movies %}
        <div class="movie-list">
            {% for movie in movies %}
            <div class="movie" onclick=window.location.href="{{ url_for('movie_detail', movie_id=movie.id) }}">
                <div class="movie-poster">
                    <img src="{{ movie.image_url }}" alt="{{ movie.title }}">
                </div>
                <div class="movie-info">
                    <h3>{{ movie.title }}</h3>
                    {% if movie.ratings %}
                    <div class="movie-rating">
                        {{ "%.1f"|format(movie.ratings|map(attribute='rating')|sum / movie.ratings|length) }}/10
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="no-results">
            <p>No movies found matching "{{ query }}"</p>
            <a href="{{ url_for('home') }}" class="browse-all">Browse All Movies</a>
        </div>
        {% endif %}
    </section>
</main>
{% endblock %} 